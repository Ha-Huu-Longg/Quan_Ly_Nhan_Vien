{"ast":null,"code":"import _objectSpread from \"D:\\\\DATA\\\\QL_NV\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"D:\\\\DATA\\\\QL_NV\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\DATA\\\\QL_NV\\\\QLNV\\\\src\\\\app\\\\views\\\\UpdateHappenings\\\\SalaryIncrease\\\\SalaryIncreaseCollapse.js\";\nimport { Button, Col, DatePicker, Form, Input, Row } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport SalaryIncreaseModal from './SalaryIncreaseModal';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addSalary, deleteSalary, getListSalary, updateSalary } from 'app/redux/actions/UpdateHappeningsActions';\nimport SalaryIncreaseTable from './SalaryIncreaseTable';\nimport ModalDelete from 'app/views/GeneralSettings/ModalDelete';\nimport ModalSendLeader from 'app/views/GeneralSettings/ModalSendLeader';\nvar TextArea = Input.TextArea;\n\nfunction SalaryIncreaseCollapse(_ref) {\n  var formRef = _ref.formRef,\n      employeeInfo = _ref.employeeInfo;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      salaryForm = _useState2[0],\n      setSalaryForm = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalDelete = _useState4[0],\n      setModalDelete = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      salaryId = _useState6[0],\n      setSalaryId = _useState6[1];\n\n  var _useState7 = useState({}),\n      _useState8 = _slicedToArray(_useState7, 2),\n      staffDataSalary = _useState8[0],\n      setStaffDataSalary = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      sendLeader = _useState10[0],\n      setSendLeader = _useState10[1];\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var SalaryList = useSelector(function (state) {\n    return state.updateEmployee.SalaryList;\n  });\n  var salaryRender = useSelector(function (state) {\n    return state.updateEmployee.salaryRender;\n  });\n  var dispatch = useDispatch();\n  useEffect(function () {\n    dispatch(getListSalary(employeeInfo));\n  }, [salaryRender]);\n\n  var handleChangeIncreaseSalary = function handleChangeIncreaseSalary(record) {\n    setSalaryId({\n      action: 'update',\n      id: record.salaryId\n    });\n    form.setFieldsValue({\n      salaryScale: record === null || record === void 0 ? void 0 : record.salaryScale,\n      reason: record === null || record === void 0 ? void 0 : record.reason,\n      note: record === null || record === void 0 ? void 0 : record.note,\n      count: record === null || record === void 0 ? void 0 : record.count,\n      date: moment(record === null || record === void 0 ? void 0 : record.date)\n    });\n  };\n\n  var submitFormSalary = function submitFormSalary(values) {\n    var staffData = _objectSpread(_objectSpread({\n      employeeId: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.employeeId\n    }, SalaryList), values);\n\n    setStaffDataSalary(staffData);\n\n    if (!(salaryId === null || salaryId === void 0 ? void 0 : salaryId.id)) {\n      dispatch(addSalary(staffData));\n      handleShowSalaryForm();\n      form.resetFields();\n    } else {\n      dispatch(updateSalary(_objectSpread(_objectSpread({}, staffData), {}, {\n        salaryId: salaryId === null || salaryId === void 0 ? void 0 : salaryId.id\n      })));\n      handleShowSalaryForm();\n      form.resetFields();\n    }\n  };\n\n  var handleOpenModalDeleteSalary = function handleOpenModalDeleteSalary(id) {\n    setModalDelete(!modalDelete);\n    setSalaryId({\n      action: '',\n      id: id\n    });\n  };\n\n  var handleDelete = function handleDelete() {\n    dispatch(deleteSalary(salaryId === null || salaryId === void 0 ? void 0 : salaryId.id));\n    setModalDelete(!modalDelete);\n    form.resetFields();\n  };\n\n  var onReset = function onReset() {\n    form.resetFields();\n    setSalaryId(null);\n  };\n\n  var handleShowSalaryForm = function handleShowSalaryForm() {\n    setSalaryForm(!salaryForm);\n  };\n\n  var handleSendLeader = function handleSendLeader() {\n    setSendLeader(!sendLeader);\n  };\n\n  var handleClear = function handleClear() {\n    setSalaryForm(false);\n    setSendLeader(false);\n    setSalaryId(null);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-form-layout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onFinish: submitFormSalary,\n    ref: formRef,\n    form: form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 12,\n    xl: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"count\",\n    label: \"L\\u1EA7n th\\u1EE9\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }, {\n      pattern: new RegExp(/^[0-9]*$/),\n      message: 'Trường này phải là số'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 12,\n    xl: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"salaryScale\",\n    label: \"B\\u1EADc\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 12,\n    xl: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"date\",\n    label: \"Ng\\xE0y t\\u0103ng l\\u01B0\\u01A1ng\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    disabledDate: function disabledDate(current) {\n      return current && current.valueOf() === Date.now();\n    },\n    placeholder: \"YYYY-MM-DD\",\n    format: \"YYYY-MM-DD\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 12,\n    xl: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"note\",\n    label: \"Ghi ch\\xFA\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 12,\n    xl: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"reason\",\n    label: \"L\\xFD do t\\u0103ng l\\u01B0\\u01A1ng\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    autoSize: {\n      minRows: 1,\n      maxRows: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 12,\n    xl: 12,\n    className: \"flexEnd mt-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"add-form\",\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 29\n    }\n  }, (salaryId === null || salaryId === void 0 ? void 0 : salaryId.action) === 'update' ? 'LƯU' : 'THÊM'), /*#__PURE__*/React.createElement(Button, {\n    className: \"cancel-form\",\n    htmlType: \"button\",\n    onClick: onReset,\n    type: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 29\n    }\n  }, \"H\\u1EE6Y\"))))), /*#__PURE__*/React.createElement(SalaryIncreaseTable, {\n    handleChangeIncreaseSalary: handleChangeIncreaseSalary,\n    handleOpenModalDeleteSalary: handleOpenModalDeleteSalary,\n    SalaryList: SalaryList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }), salaryForm && /*#__PURE__*/React.createElement(SalaryIncreaseModal, {\n    open: salaryForm,\n    onCancel: handleClear,\n    employeeInfo: employeeInfo,\n    staffDataSalary: staffDataSalary,\n    onSend: handleSendLeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  }), modalDelete && /*#__PURE__*/React.createElement(ModalDelete, {\n    open: modalDelete,\n    onCancel: handleOpenModalDeleteSalary,\n    onOk: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 17\n    }\n  }), sendLeader && /*#__PURE__*/React.createElement(ModalSendLeader, {\n    open: sendLeader,\n    onCancel: handleSendLeader,\n    employeeId: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.employeeId,\n    onClose: handleClear,\n    status: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  }));\n}\n\nexport default SalaryIncreaseCollapse;","map":{"version":3,"sources":["D:/DATA/QL_NV/QLNV/src/app/views/UpdateHappenings/SalaryIncrease/SalaryIncreaseCollapse.js"],"names":["Button","Col","DatePicker","Form","Input","Row","moment","React","useEffect","useState","SalaryIncreaseModal","useDispatch","useSelector","addSalary","deleteSalary","getListSalary","updateSalary","SalaryIncreaseTable","ModalDelete","ModalSendLeader","TextArea","SalaryIncreaseCollapse","formRef","employeeInfo","salaryForm","setSalaryForm","modalDelete","setModalDelete","salaryId","setSalaryId","staffDataSalary","setStaffDataSalary","sendLeader","setSendLeader","useForm","form","SalaryList","state","updateEmployee","salaryRender","dispatch","handleChangeIncreaseSalary","record","action","id","setFieldsValue","salaryScale","reason","note","count","date","submitFormSalary","values","staffData","employeeId","handleShowSalaryForm","resetFields","handleOpenModalDeleteSalary","handleDelete","onReset","handleSendLeader","handleClear","required","message","pattern","RegExp","current","valueOf","Date","now","minRows","maxRows"],"mappings":"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","sourcesContent":["import { Button, Col, DatePicker, Form, Input, Row } from 'antd';\r\nimport moment from 'moment';\r\nimport React, { useEffect, useState } from 'react';\r\nimport SalaryIncreaseModal from './SalaryIncreaseModal';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { addSalary, deleteSalary, getListSalary, updateSalary } from 'app/redux/actions/UpdateHappeningsActions';\r\nimport SalaryIncreaseTable from './SalaryIncreaseTable';\r\nimport ModalDelete from 'app/views/GeneralSettings/ModalDelete';\r\nimport ModalSendLeader from 'app/views/GeneralSettings/ModalSendLeader';\r\n\r\nconst { TextArea } = Input;\r\n\r\nfunction SalaryIncreaseCollapse({ formRef, employeeInfo }) {\r\n    const [salaryForm, setSalaryForm] = useState(false);\r\n    const [modalDelete, setModalDelete] = useState(false);\r\n    const [salaryId, setSalaryId] = useState(null);\r\n    const [staffDataSalary, setStaffDataSalary] = useState({});\r\n    const [sendLeader, setSendLeader] = useState(false);\r\n\r\n    const [form] = Form.useForm();\r\n    const SalaryList = useSelector((state) => state.updateEmployee.SalaryList);\r\n    const salaryRender = useSelector((state) => state.updateEmployee.salaryRender);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        dispatch(getListSalary(employeeInfo));\r\n    }, [salaryRender]);\r\n\r\n    const handleChangeIncreaseSalary = (record) => {\r\n        setSalaryId({\r\n            action: 'update',\r\n            id: record.salaryId,\r\n        });\r\n\r\n        form.setFieldsValue({\r\n            salaryScale: record?.salaryScale,\r\n            reason: record?.reason,\r\n            note: record?.note,\r\n            count: record?.count,\r\n            date: moment(record?.date),\r\n        });\r\n    };\r\n\r\n    const submitFormSalary = (values) => {\r\n        const staffData = {\r\n            employeeId: employeeInfo?.employeeId,\r\n            ...SalaryList,\r\n            ...values,\r\n        };\r\n\r\n        setStaffDataSalary(staffData);\r\n        if (!salaryId?.id) {\r\n            dispatch(addSalary(staffData));\r\n            handleShowSalaryForm();\r\n            form.resetFields();\r\n        } else {\r\n            dispatch(updateSalary({ ...staffData, salaryId: salaryId?.id }));\r\n            handleShowSalaryForm();\r\n            form.resetFields();\r\n        }\r\n    };\r\n\r\n    const handleOpenModalDeleteSalary = (id) => {\r\n        setModalDelete(!modalDelete);\r\n        setSalaryId({\r\n            action: '',\r\n            id,\r\n        });\r\n    };\r\n\r\n    const handleDelete = () => {\r\n        dispatch(deleteSalary(salaryId?.id));\r\n        setModalDelete(!modalDelete);\r\n        form.resetFields();\r\n    };\r\n\r\n    const onReset = () => {\r\n        form.resetFields();\r\n        setSalaryId(null);\r\n    };\r\n\r\n    const handleShowSalaryForm = () => {\r\n        setSalaryForm(!salaryForm);\r\n    };\r\n\r\n    const handleSendLeader = () => {\r\n        setSendLeader(!sendLeader);\r\n    };\r\n\r\n    const handleClear = () => {\r\n        setSalaryForm(false);\r\n        setSendLeader(false);\r\n        setSalaryId(null);\r\n    };\r\n    return (\r\n        <div className=\"content-form-layout\">\r\n            <Form onFinish={submitFormSalary} ref={formRef} form={form}>\r\n                <Row>\r\n                    <Col span={24} md={12} xl={3}>\r\n                        <Form.Item\r\n                            name=\"count\"\r\n                            label=\"Lần thứ\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                                {\r\n                                    pattern: new RegExp(/^[0-9]*$/),\r\n                                    message: 'Trường này phải là số',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={12} xl={4}>\r\n                        <Form.Item\r\n                            name=\"salaryScale\"\r\n                            label=\"Bậc\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={12} xl={5}>\r\n                        <Form.Item\r\n                            name=\"date\"\r\n                            label=\"Ngày tăng lương\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <DatePicker\r\n                                disabledDate={(current) => {\r\n                                    return current && current.valueOf() === Date.now();\r\n                                }}\r\n                                placeholder=\"YYYY-MM-DD\"\r\n                                format=\"YYYY-MM-DD\"\r\n                            />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={12} xl={12}>\r\n                        <Form.Item\r\n                            name=\"note\"\r\n                            label=\"Ghi chú\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={12} xl={12}>\r\n                        <Form.Item\r\n                            name=\"reason\"\r\n                            label=\"Lý do tăng lương\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <TextArea\r\n                                autoSize={{\r\n                                    minRows: 1,\r\n                                    maxRows: 3,\r\n                                }}\r\n                            />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={12} xl={12} className=\"flexEnd mt-10\">\r\n                        <Form.Item>\r\n                            <Button className=\"add-form\" type=\"primary\" htmlType=\"submit\">\r\n                                {salaryId?.action === 'update' ? 'LƯU' : 'THÊM'}\r\n                            </Button>\r\n                            <Button className=\"cancel-form\" htmlType=\"button\" onClick={onReset} type=\"primary\">\r\n                                HỦY\r\n                            </Button>\r\n                        </Form.Item>\r\n                    </Col>\r\n                </Row>\r\n            </Form>\r\n\r\n            <SalaryIncreaseTable\r\n                handleChangeIncreaseSalary={handleChangeIncreaseSalary}\r\n                handleOpenModalDeleteSalary={handleOpenModalDeleteSalary}\r\n                SalaryList={SalaryList}\r\n            />\r\n\r\n            {salaryForm && (\r\n                <SalaryIncreaseModal\r\n                    open={salaryForm}\r\n                    onCancel={handleClear}\r\n                    employeeInfo={employeeInfo}\r\n                    staffDataSalary={staffDataSalary}\r\n                    onSend={handleSendLeader}\r\n                />\r\n            )}\r\n\r\n            {modalDelete && (\r\n                <ModalDelete open={modalDelete} onCancel={handleOpenModalDeleteSalary} onOk={handleDelete} />\r\n            )}\r\n\r\n            {sendLeader && (\r\n                <ModalSendLeader\r\n                    open={sendLeader}\r\n                    onCancel={handleSendLeader}\r\n                    employeeId={employeeInfo?.employeeId}\r\n                    onClose={handleClear}\r\n                    status={16}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SalaryIncreaseCollapse;\r\n"]},"metadata":{},"sourceType":"module"}