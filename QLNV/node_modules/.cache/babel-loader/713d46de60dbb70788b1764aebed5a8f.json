{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\DATA\\\\QL_NV\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _objectSpread from \"D:\\\\DATA\\\\QL_NV\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"D:\\\\DATA\\\\QL_NV\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\DATA\\\\QL_NV\\\\QLNV\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\DATA\\\\QL_NV\\\\QLNV\\\\src\\\\app\\\\views\\\\UpdateHappenings\\\\RegisterProfile\\\\RegisterCollapse.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Button, Col, DatePicker, Form, Input, Row } from 'antd';\nimport moment from 'moment';\nimport RegisterProfileModal from './RegisterProfileModal';\nimport { addProposed, deleteProposed, getListProposed, updateProposed } from 'app/redux/actions/UpdateHappeningsActions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport RegisterTable from './RegisterTable';\nimport ModalDelete from 'app/views/GeneralSettings/ModalDelete';\nimport ModalSendLeader from 'app/views/GeneralSettings/ModalSendLeader';\nvar TextArea = Input.TextArea;\n\nfunction RegisterCollapse(_ref) {\n  var formRef = _ref.formRef,\n      employeeInfo = _ref.employeeInfo;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      registerForm = _useState2[0],\n      setRegisterForm = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      proposalConsultationId = _useState4[0],\n      setProposalConsultationId = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modalDelete = _useState6[0],\n      setModalDelete = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      sendLeader = _useState8[0],\n      setSendLeader = _useState8[1];\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var dispatch = useDispatch();\n  var employeeData = useSelector(function (state) {\n    return state.updateEmployee.ProposedList;\n  });\n  var ProposedRender = useSelector(function (state) {\n    return state.updateEmployee.ProposedRender;\n  });\n  useEffect(function () {\n    dispatch(getListProposed(employeeInfo));\n  }, [ProposedRender]);\n\n  var handleChangeRegister = function handleChangeRegister(record) {\n    setProposalConsultationId({\n      action: 'update',\n      id: record === null || record === void 0 ? void 0 : record.proposalConsultationId\n    });\n    form.setFieldsValue({\n      type: record === null || record === void 0 ? void 0 : record.type,\n      content: record === null || record === void 0 ? void 0 : record.content,\n      note: record === null || record === void 0 ? void 0 : record.note,\n      date: moment(record === null || record === void 0 ? void 0 : record.date)\n    });\n  };\n\n  var addProfileList = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n      var staffData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              staffData = _objectSpread(_objectSpread({\n                employeeId: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.employeeId\n              }, employeeData), values);\n\n              if (!(proposalConsultationId === null || proposalConsultationId === void 0 ? void 0 : proposalConsultationId.id)) {\n                dispatch(addProposed(staffData));\n                form.resetFields();\n                handleShowRegisterForm();\n              } else {\n                dispatch(updateProposed(_objectSpread(_objectSpread({}, staffData), {}, {\n                  proposalConsultationId: proposalConsultationId === null || proposalConsultationId === void 0 ? void 0 : proposalConsultationId.id\n                })));\n                handleShowRegisterForm();\n                form.resetFields();\n              }\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function addProfileList(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleOpenModalDeleteRegister = function handleOpenModalDeleteRegister(id) {\n    setModalDelete(!modalDelete);\n    setProposalConsultationId({\n      action: '',\n      id: id\n    });\n  };\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              dispatch(deleteProposed(proposalConsultationId === null || proposalConsultationId === void 0 ? void 0 : proposalConsultationId.id));\n              setModalDelete(!modalDelete);\n              form.resetFields();\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleDelete() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onReset = function onReset() {\n    form.resetFields();\n    setProposalConsultationId(null);\n  };\n\n  var handleShowRegisterForm = function handleShowRegisterForm() {\n    setRegisterForm(!registerForm);\n  };\n\n  var handleSendLeader = function handleSendLeader() {\n    setSendLeader(!sendLeader);\n  };\n\n  var handleClear = function handleClear() {\n    setProposalConsultationId(null);\n    setRegisterForm(false);\n    setSendLeader(false);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-form-layout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onFinish: addProfileList,\n    ref: formRef,\n    form: form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 24,\n    xl: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"type\",\n    label: \"H\\u1ED3 s\\u01A1\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }, {\n      whitespace: true,\n      message: 'không được để khoảng trằng trống'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 12,\n    xl: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"date\",\n    label: \"Ng\\xE0y \\u0111\\u0103ng k\\xED\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    placeholder: \"YYYY-MM-DD\",\n    format: \"YYYY-MM-DD\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 12,\n    xl: 11,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"note\",\n    label: \"Ghi ch\\xFA\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }, {\n      whitespace: true,\n      message: 'không được để khoảng trằng trống'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 12,\n    xl: 13,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"content\",\n    label: \"N\\u1ED9i dung\",\n    rules: [{\n      required: true,\n      message: 'Bắt buộc phải chọn trường này!'\n    }, {\n      whitespace: true,\n      message: 'không được để khoảng trằng trống'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    autoSize: {\n      minRows: 1,\n      maxRows: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    md: 24,\n    xl: 11,\n    className: \"btn-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"add-form\",\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 29\n    }\n  }, (proposalConsultationId === null || proposalConsultationId === void 0 ? void 0 : proposalConsultationId.action) === 'update' ? 'LƯU' : 'THÊM'), /*#__PURE__*/React.createElement(Button, {\n    className: \"cancel-form\",\n    htmlType: \"button\",\n    onClick: onReset,\n    type: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 29\n    }\n  }, \"H\\u1EE6Y\"))))), /*#__PURE__*/React.createElement(RegisterTable, {\n    handleChangeRegister: handleChangeRegister,\n    handleOpenModalDeleteRegister: handleOpenModalDeleteRegister,\n    employeeData: employeeData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }), registerForm && /*#__PURE__*/React.createElement(RegisterProfileModal, {\n    open: registerForm,\n    onSend: handleSendLeader,\n    onCancel: handleClear,\n    employeeInfo: employeeInfo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }), modalDelete && /*#__PURE__*/React.createElement(ModalDelete, {\n    open: modalDelete,\n    onCancel: handleOpenModalDeleteRegister,\n    onOk: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  }), sendLeader && /*#__PURE__*/React.createElement(ModalSendLeader, {\n    open: sendLeader,\n    onCancel: handleSendLeader,\n    employeeId: employeeInfo === null || employeeInfo === void 0 ? void 0 : employeeInfo.employeeId,\n    onClose: handleClear,\n    status: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }));\n}\n\nexport default RegisterCollapse;","map":{"version":3,"sources":["D:/DATA/QL_NV/QLNV/src/app/views/UpdateHappenings/RegisterProfile/RegisterCollapse.js"],"names":["React","useEffect","useState","Button","Col","DatePicker","Form","Input","Row","moment","RegisterProfileModal","addProposed","deleteProposed","getListProposed","updateProposed","useDispatch","useSelector","RegisterTable","ModalDelete","ModalSendLeader","TextArea","RegisterCollapse","formRef","employeeInfo","registerForm","setRegisterForm","proposalConsultationId","setProposalConsultationId","modalDelete","setModalDelete","sendLeader","setSendLeader","useForm","form","dispatch","employeeData","state","updateEmployee","ProposedList","ProposedRender","handleChangeRegister","record","action","id","setFieldsValue","type","content","note","date","addProfileList","values","staffData","employeeId","resetFields","handleShowRegisterForm","handleOpenModalDeleteRegister","handleDelete","onReset","handleSendLeader","handleClear","required","message","whitespace","minRows","maxRows"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Button, Col, DatePicker, Form, Input, Row } from 'antd';\r\nimport moment from 'moment';\r\nimport RegisterProfileModal from './RegisterProfileModal';\r\nimport {\r\n    addProposed,\r\n    deleteProposed,\r\n    getListProposed,\r\n    updateProposed,\r\n} from 'app/redux/actions/UpdateHappeningsActions';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport RegisterTable from './RegisterTable';\r\nimport ModalDelete from 'app/views/GeneralSettings/ModalDelete';\r\nimport ModalSendLeader from 'app/views/GeneralSettings/ModalSendLeader';\r\n\r\nconst { TextArea } = Input;\r\n\r\nfunction RegisterCollapse({ formRef, employeeInfo }) {\r\n    const [registerForm, setRegisterForm] = useState(false);\r\n    const [proposalConsultationId, setProposalConsultationId] = useState(null);\r\n    const [modalDelete, setModalDelete] = useState(false);\r\n    const [sendLeader, setSendLeader] = useState(false);\r\n\r\n    const [form] = Form.useForm();\r\n    const dispatch = useDispatch();\r\n    const employeeData = useSelector((state) => state.updateEmployee.ProposedList);\r\n    const ProposedRender = useSelector((state) => state.updateEmployee.ProposedRender);\r\n\r\n    useEffect(() => {\r\n        dispatch(getListProposed(employeeInfo));\r\n    }, [ProposedRender]);\r\n\r\n    const handleChangeRegister = (record) => {\r\n        setProposalConsultationId({\r\n            action: 'update',\r\n            id: record?.proposalConsultationId,\r\n        });\r\n\r\n        form.setFieldsValue({\r\n            type: record?.type,\r\n            content: record?.content,\r\n            note: record?.note,\r\n            date: moment(record?.date),\r\n        });\r\n    };\r\n\r\n    const addProfileList = async (values) => {\r\n        const staffData = {\r\n            employeeId: employeeInfo?.employeeId,\r\n            ...employeeData,\r\n            ...values,\r\n        };\r\n\r\n        if (!proposalConsultationId?.id) {\r\n            dispatch(addProposed(staffData));\r\n            form.resetFields();\r\n            handleShowRegisterForm();\r\n        } else {\r\n            dispatch(updateProposed({ ...staffData, proposalConsultationId: proposalConsultationId?.id }));\r\n            handleShowRegisterForm();\r\n            form.resetFields();\r\n        }\r\n    };\r\n\r\n    const handleOpenModalDeleteRegister = (id) => {\r\n        setModalDelete(!modalDelete);\r\n        setProposalConsultationId({\r\n            action: '',\r\n            id,\r\n        });\r\n    };\r\n\r\n    const handleDelete = async () => {\r\n        dispatch(deleteProposed(proposalConsultationId?.id));\r\n        setModalDelete(!modalDelete);\r\n        form.resetFields();\r\n    };\r\n\r\n    const onReset = () => {\r\n        form.resetFields();\r\n        setProposalConsultationId(null);\r\n    };\r\n\r\n    const handleShowRegisterForm = () => {\r\n        setRegisterForm(!registerForm);\r\n    };\r\n\r\n    const handleSendLeader = () => {\r\n        setSendLeader(!sendLeader);\r\n    };\r\n\r\n    const handleClear = () => {\r\n        setProposalConsultationId(null);\r\n        setRegisterForm(false);\r\n        setSendLeader(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"content-form-layout\">\r\n            <Form onFinish={addProfileList} ref={formRef} form={form}>\r\n                <Row>\r\n                    <Col span={24} md={24} xl={8}>\r\n                        <Form.Item\r\n                            name=\"type\"\r\n                            label=\"Hồ sơ\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                                { whitespace: true, message: 'không được để khoảng trằng trống' },\r\n                            ]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={12} xl={5}>\r\n                        <Form.Item\r\n                            name=\"date\"\r\n                            label=\"Ngày đăng kí\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <DatePicker placeholder=\"YYYY-MM-DD\" format=\"YYYY-MM-DD\" />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={12} xl={11}>\r\n                        <Form.Item\r\n                            name=\"note\"\r\n                            label=\"Ghi chú\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                                { whitespace: true, message: 'không được để khoảng trằng trống' },\r\n                            ]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={12} xl={13}>\r\n                        <Form.Item\r\n                            name=\"content\"\r\n                            label=\"Nội dung\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Bắt buộc phải chọn trường này!',\r\n                                },\r\n                                { whitespace: true, message: 'không được để khoảng trằng trống' },\r\n                            ]}\r\n                        >\r\n                            <TextArea\r\n                                autoSize={{\r\n                                    minRows: 1,\r\n                                    maxRows: 3,\r\n                                }}\r\n                            />\r\n                        </Form.Item>\r\n                    </Col>\r\n\r\n                    <Col span={24} md={24} xl={11} className=\"btn-form\">\r\n                        <Form.Item>\r\n                            <Button className=\"add-form\" type=\"primary\" htmlType=\"submit\">\r\n                                {proposalConsultationId?.action === 'update' ? 'LƯU' : 'THÊM'}\r\n                            </Button>\r\n                            <Button className=\"cancel-form\" htmlType=\"button\" onClick={onReset} type=\"primary\">\r\n                                HỦY\r\n                            </Button>\r\n                        </Form.Item>\r\n                    </Col>\r\n                </Row>\r\n            </Form>\r\n\r\n            <RegisterTable\r\n                handleChangeRegister={handleChangeRegister}\r\n                handleOpenModalDeleteRegister={handleOpenModalDeleteRegister}\r\n                employeeData={employeeData}\r\n            />\r\n\r\n            {registerForm && (\r\n                <RegisterProfileModal\r\n                    open={registerForm}\r\n                    onSend={handleSendLeader}\r\n                    onCancel={handleClear}\r\n                    employeeInfo={employeeInfo}\r\n                />\r\n            )}\r\n\r\n            {modalDelete && (\r\n                <ModalDelete open={modalDelete} onCancel={handleOpenModalDeleteRegister} onOk={handleDelete} />\r\n            )}\r\n\r\n            {sendLeader && (\r\n                <ModalSendLeader\r\n                    open={sendLeader}\r\n                    onCancel={handleSendLeader}\r\n                    employeeId={employeeInfo?.employeeId}\r\n                    onClose={handleClear}\r\n                    status={16}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RegisterCollapse;\r\n"]},"metadata":{},"sourceType":"module"}